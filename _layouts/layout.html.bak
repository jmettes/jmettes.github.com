<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>{{ page.title }} - {{ site.title }}</title>
  <link rel="canonical" href="http://{{ site.domain }}" />
  <link title="{{ site.title }} - Atom" type="application/atom+xml" rel="alternate" href="/atom.xml" />
  <link type="text/css" rel="stylesheet" href="/css/style.css" />
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.0/jquery.min.js"></script>
</head>
<body>
  <div id="wrapper">
    <div id="bg"></div>
    <div id="posts">
      {{ content }}
    </div>
    <div id="paginate">
      <input type="button" value="LOAD" id="loader"/>
      <noscript>
        {% if paginator.previous_page %}
        {% if paginator.previous_page == 1 %}
        <a href="/" id="previous">&lt; Prev</a>
        {% else %}
        <a href="/page{{ paginator.previous_page }}" id="previous">&lt; Prev</a>
        {% endif %}
        {% endif %}
        {% if paginator.next_page %}
        <a href="/page{{ paginator.next_page }}">Next &gt;</a>
        {% endif %}
      </noscript>
    </div>
  </div>
  <script type="text/javascript">
  $(document).ready(function() {
    var loading = false;
    var url = "{{ site.posts[paginator.per_page].url }}";
   
    $('#loader').bind('click', function() {

        $.get(url, function(data) {
          $('<div class="post"/>')
            .append($(data).find('h2'))
            .append($(data).find('#content'))
            .appendTo('#posts');
          url = $(data).find('#previous').attr('href');

          if (!url) { // reached ending
            $('#loader').unbind('click');
            $('#loader').remove();
          }

          loading = false;
        });

    });

  });
  </script>

</body>
</html>
